<!-- login part start -->
import React, { useState, useEffect } from "react";
import {
  MDBCard,
  MDBCardBody,
  MDBInput,
  MDBCardFooter,
  MDBValidation,
  MDBBtn,
  MDBIcon,
  MDBSpinner,
} from "mdb-react-ui-kit";
import { Link, useNavigate } from "react-router-dom";
import { useDispatch, useSelector } from "react-redux";
import { toast } from "react-toastify";
import { googleSignIn, Login ,reset} from "../CopyRedux/authSlice";
import { GoogleLogin } from "react-google-login";
import "./LoginCopy.css";
import { ToastContainer } from "react-bootstrap";


const initialState = {
  email: "",
  password: "",
};


const LoginCopy = () => {


  const [formValue, setFormValue] = useState(initialState);
  const { loading, error } = useSelector((state) => ({ ...state.auth }));
  const { email, password } = formValue;
  const dispatch = useDispatch();
  const navigate = useNavigate();


  useEffect(() => {
    error && toast.error(error);
  }, [error]);

  const handleSubmit = (e) => {
    e.preventDefault();
    if (email && password) {
      dispatch(Login({ formValue, navigate, toast }));
    }
  };

  const onInputChange = (e) => {
    let { name, value } = e.target;
    setFormValue({ ...formValue, [name]: value });
  };

  const googleSuccess = (resp) => {
    const email = resp?.profileObj?.email;
    const name = resp?.profileObj?.name;
    const token = resp?.tokenId;
    const googleId = resp?.googleId;
    const result = { email, name, token, googleId };
    // dispatch(googleSignIn({ result, navigate, toast }));
  };
  const googleFailure = (error) => {
    toast.error(error);
  };




  return (
    <>
   <ToastContainer/>
    <div
      style={{
        margin: "auto",
        padding: "15px",
        maxWidth: "450px",
        alignContent: "center",
        marginTop: "120px",
      }}
    >
      <MDBCard alignment="center">
        <MDBIcon fas icon="user-circle" className="fa-2x" />
        <h5>Sign In</h5>
        <MDBCardBody>
     {/*   {isError && (
          <p
            style={{ color: "red", fontsize: "12px" }}
            className="has-text-centered"
          >
            {message}
          </p>
     )} */}
          <MDBValidation onSubmit={handleSubmit} noValidate className="row g-3">
            <div className="col-md-12">
              <MDBInput
                label="Email"
                type="email"
                value={email}
                name="email"
                onChange={onInputChange}
                required
                invalid
                validation="Please provide your email"
              />
            </div>
            <div className="col-md-12">
              <MDBInput
                label="Password"
                type="password"
                value={password}
                name="password"
                onChange={onInputChange}
                required
                invalid
                validation="Please provide your password"
              />
            </div>
            <div className="col-12">
             {/* <MDBBtn style={{ width: "100%" }} className="mt-2">
                {loading && (
                  <MDBSpinner
                    size="sm"
                    role="status"
                    tag="span"
                    className="me-2"
                  />
                )}
                Login
                </MDBBtn> */}
                <div className="login-button">
                 <button className="btn-login">Login</button>
                </div>
                </div>
          </MDBValidation>
          <br />
          <GoogleLogin
            clientId="your client id"
            render={(renderProps) => (
              <MDBBtn
                style={{ width: "100%" }}
                color="danger"
                onClick={renderProps.onClick}
                disabled={renderProps.disabled}
              >
                <MDBIcon className="me-2" fab icon="google" /> Google Sign In
              </MDBBtn>
            )}
            onSuccess={googleSuccess}
            onFailure={googleFailure}
            cookiePolicy="single_host_origin"
          />
        </MDBCardBody>
        <MDBCardFooter>
          <Link to="/Register">
            <p>Don't have an account ? Sign Up</p>
          </Link>
        </MDBCardFooter>
      </MDBCard>
    </div>
    </>
  );
};

export default LoginCopy;
<!-- login part ends -->



<!-- advance code start ============================================-->
import {
  ListGroup,
  Container,
  Row,
  Col,
  Form,
  Button,
  Tabs,
  Tab,
  Modal,
} from "react-bootstrap";
import { toast, ToastContainer } from "react-toastify";
import { Edit } from "react-feather";
import Sidebar from "../sidebar/Sidebar";
import "./Usermanagement.css";
// development part start===========================================>
import React, { useEffect, useState } from "react";
import axios from "axios";
import nextId from "react-id-generator";
import ReactHTMLTableToExcel from "react-html-table-to-excel";
import ReactPaginate from "react-paginate";
import { Accordion,Table } from "react-bootstrap";
import { BsArrowDownUp } from "react-icons/bs";
import { AiOutlineMinusCircle } from "react-icons/ai";
import { GrPowerReset } from "react-icons/gr";
import ReadTable from "../usermanagement/ReadTable";
import Handleformone from "../usermanagement/Handleformone";
import Header from "../header/Header";
import { Navigate } from "react-router-dom";
// import { DeleteUser } from "..authSlice/CopyRedux/AuthSlice";
import {DeleteUser} from "../CopyRedux/authSlice"
import { useDispatch, useSelector } from "react-redux";
// import ReadTable from "../usermanagement/ReadTable";
// development part ends============================================>

// currentPosts, setCurrentPosts,searchQuery, setSearchQuery,order, setorder,currentPage, setCurrentPage,posts, setPosts,addPost, setAddPost,editPostId, setEditPostId,editFormData, setEditFormData,selectedItem, setSelectedItem
const PER_PAGE = 5;

function Usermanagement({}) {
  const [clicked, setClicked] = useState(null);
  // const [posts, setPosts] = useState([]);
  const [show, setShow] = useState(false);

 
  {
    /* usermanagement coding part start ================================*/
  }
  // all addtable states start =================================>
  const [Usermanagement, setUserManagement] = useState([]);

  const [addPost, setAddPost] = useState({
    email: "",
    role: "",
  });

  const [editPostId, setEditPostId] = useState(null);
  const [editFormData, setEditFormData] = useState({
    email: "",
    role: "",
  });
  const [selectedItem, setSelectedItem] = useState(null);
  const [currentPage, setCurrentPage] = useState(0);
  const [order, setorder] = useState("ASC");
  const [searchQuery, setSearchQuery] = useState("");
  const [currentPosts, setCurrentPosts] = useState([]);

  // all addtable states ends====================================>

  // Global form functionality start=================================>
  const [forms, setForms] = useState("form one");
  const [handleformonevisible, setHandleFormOneVisible] = useState(false);

  // Global Form functionality ends==================================>
  const handleClose = () => setShow(false);
  const handleShow = () => setShow(true);
  const dispatch = useDispatch();
  // const navigate = useNavigate();
  // sorting part start================================>
  const sorting = (col) => {
    if (order === "ASC") {
      const sorted = [...Usermanagement].sort((a, b) =>
        a[col].toLowerCase() > b[col].toLowerCase() ? 1 : -1
      );
      setUserManagement(sorted);
      setorder("DSC");
    }
    if (order === "DSC") {
      const sorted = [...Usermanagement].sort((a, b) =>
        a[col].toLowerCase() < b[col].toLowerCase() ? 1 : -1
      );
      setUserManagement(sorted);
      setorder("ASC");
    }
  };
  // sorting part ends=========================================>

// advance part start==================>


const getUsers = async () => {
  const response = await axios.get("http://localhost:5000/Usermanagement");
  setUserManagement(response.data);
  console.log(" all users")
};

useEffect(() => {
  getUsers();
}, []);

//  const DeleteUser = (id) =>

// fetch(`http://localhost:5000/${id}`,{   
//     method:'DELETE',
//     headers:{
//        'Content-Type': 'application/json'
//     }
    
// });

const DeleteUser = async(uuid) => {
  console.log("hello")
   await axios.delete(`http://localhost:5000/${uuid}`);
   console.log("bye")
   getUsers();
  console.log(uuid)
};

// const handleDelete = (e,id) => {
//   // e.preventDefault();
//   dispatch(DeleteUser({id}));
// };



// advance part ends======================>


  //Add Data To Table start==================================>
  const handleAddPost = (e) => {
    e.preventDefault();

    const newPost = {
      id: nextId(),
      email: addPost.email,
      role: addPost.role,
    };
    const newPosts = [...Usermanagement, newPost];
    setUserManagement(newPosts);
    console.log(newPosts);
    toast.success("User Added Successfully");
  };
  //Add Data To Table ends==================================>

  //Get Form Values start=============================>
  const handleChange = (input) => (e) => {
    e.preventDefault();
    console.log(addPost);
    setAddPost({ ...addPost, [input]: e.target.value });
  };
  //Get Form Values ends=============================>

  //Edit data into table starts====================================>
  const handleEditFormClick = (input) => (e) => {
    e.preventDefault();
    console.log(editFormData);
    setEditFormData({ ...editFormData, [input]: e.target.value });
  };
  //Edit data into table ends====================================>

  //onclick Edit data into table start====================================>
  const handleEditPostForm = (e, user) => {
    e.preventDefault();
    setEditPostId(user.id);
    console.log(user.id);

    const formValues = {
      // id:editPostId,
      email: user.email,
      role: user.role,
    };
    setEditFormData(formValues);
  };

  //onclick Edit Form Data ends=====================================================>

  //Save Edit Form Data start==========================================>
  const handleFormSave = (e,user) => {

    e.preventDefault();
    const savePost = {
      id: editPostId,
      email: editFormData.email,
      role: editFormData.role,
    };
    const newPosts = [...Usermanagement];
    const formIndex = Usermanagement.findIndex((user) => user.id === editPostId);
    newPosts[formIndex] = savePost;
    setUserManagement(newPosts);
    setEditPostId(null);
    // setSelectedItem(null);
    console.log(editPostId);
  };
  //Save Edit Form Data ends==========================================>


  //pop-up  Delete Data start===================================================>
  // const handleDelete = (e,user) => {

  //   e.preventDefault();
  //   const newPosts = [...Usermanagement];
  //   const formIndex = Usermanagement.findIndex((user) => user.id === editPostId);
  //   newPosts.splice(formIndex, 1);
  //   setUserManagement(newPosts);
  //   setSelectedItem(null);
  //   console.log(newPosts); 
  //  };

  // pop-up Delete Data ends===================================================>


  //Get Data From JSON Placeholder===========================>
  // const fetchUrl = "http://localhost:5000/Usermanagement";

  // useEffect(() => {
  //     async function fetchData  () {
  //     const data = await axios.get(fetchUrl);
  //     setUserManagement(data.data);
  //     console.log(data.data);
  //     return data;
  //    }
  //   fetchData();
  //   }, [fetchUrl]);



  //Get Data From JSON Placeholder===========================>

  // searching part using useEffect=============================>
  useEffect(() => {
    setCurrentPage(0);
    if (!searchQuery) {
      setCurrentPosts(Usermanagement);
      return;
    }
    const tempPosts = Usermanagement.filter(
      (row) => row.title.toLowerCase().indexOf(searchQuery) > -1
    );
    setCurrentPosts(tempPosts);
  }, [searchQuery, Usermanagement]);
  // searching part using useEffect=============================>

  // selecting functionality using useeffect start====================>
  useEffect(() => {
    forms === "form one"
      ? setHandleFormOneVisible(true)
      : setHandleFormOneVisible(false);
    // team === "team two" ? setTeamTwoVisible(true) : setTeamTwoVisible(false);
  }, [forms]);
  // selecting functionality using useeffect ends====================>

  //  Pagination part start=====================================>
  const handlePageClick = ({ selected: selectedPage }) => {
    console.log("selectedPage", selectedPage);
    setCurrentPage(selectedPage);
  };
  const offset = currentPage * PER_PAGE;

  const pageCount = Math.ceil(currentPosts.length / PER_PAGE);
  console.log("hello i am current posts", currentPosts);
  //  Pagination part ends=====================================>

  // Global form handling start============================>
  const handleOnChange = (e) => {
    setForms(e.target.value);
  };
  // Global from handling ends================================>

  {/* usermanagement coding part ends ================================*/}

  return (
    <>
    <ToastContainer/>
    <Header/>
      <ListGroup bsPrefix className="myprofile">
        <Container fluid>
          <Row>
            <Col className="leftside-content width-fix">
              <Sidebar />
            </Col>
            {/* usermanagement HTML part start ================================*/}
            <Col>
              <ListGroup bsPrefix="rightside-content">
                {/* search form starts ========================================>*/}
                <div className="d-flex-user">
                  <Row>
                    <Col md={6} lg={6} className="userhead-right">
                      <div className="usermanagement">
                        <h4>User Management</h4>
                      </div>
                    </Col>
                   
                    <Col md={6} lg={6} className="search-right">
                   <div className="search d-flex">
                    <div className="search">
                        <form className="row g-3 ms-auto">
                          <div className="col-auto">
                            <input
                              type="text"
                              className="form-control ms-auto"
                              placeholder="search data"
                              value={searchQuery}
                              onChange={(e) => setSearchQuery(e.target.value)}
                            />
                          </div>
                        </form>
                      </div>
                      {/*  Add button pop-up start =========================================>*/}
                      <div className="btn-one">
                      <Button variant="warning" onClick={handleShow} >
                        Add +
                      </Button>
                      </div>
                      </div>
                      {/*  Add button pop-up ends =========================================>*/}
                   
                     
                    </Col>
                  </Row>
                </div>

                {/* search form ends ========================================>*/}

                {/* usermanagement Tabs part start ================================*/}

                <Tabs
                  defaultActiveKey="mydetails"
                  id="uncontrolled-tab-example"
                  className="myprofiletab"
                >
                  <Tab eventKey="mydetails" title="Users">
                    <div className="common-tab">
                      {/* first table start==================================================> */}
                      <Accordion>
                        <Accordion.Item eventKey="0">
                          <Accordion.Header>Administrators</Accordion.Header>
                          <Accordion.Body>
                            <Container>
                              <Row>
                                <div className="Dhasu">
                                  <ReactHTMLTableToExcel
                                    id="test-table-xls-button"
                                    className="download-table-xls-button"
                                    table="table-to-xls"
                                    filename="tablexls"
                                    sheet="tablexls"
                                    buttonText="Export"
                                  />
                                </div>

                                <table
                                  className="table table-bordered border-primary table-responsive"
                                  id="table-to-xls"
                                >
                                  {
                                    !selectedItem ? (
                                      <thead>
                                        <tr>
                                          <th scope="col">
                                            <input
                                              type="checkbox"
                                              // onChange={(e) => {
                                              //   setSelectedAll((prev) => !prev);
                                              // }}
                                              // checked={selectAll}
                                            />
                                          </th>

                                          <th scope="col">ID</th>
                                          <th
                                            className="arrow-one"
                                            scope="col"
                                            onClick={() => sorting("email")}
                                          >
                                          Email
                                            <BsArrowDownUp />
                                          </th>
                                          <th
                                            className="arrow-one"
                                            scope="col"
                                            onClick={() => sorting("role")}
                                          >
                                         Role
                                            <BsArrowDownUp />
                                          </th>
                                         {/* <th
                                            className="arrow-one"
                                            scope="col"
                                            onClick={() => sorting("body")}
                                          >
                                            JobTitle
                                    <BsArrowDownUp /> 
                                          </th>*/}
                                        </tr>
                                      </thead>
                                    ) : (
                                      // edit row part start=========================>
                                      <thead>
                                        <th></th>
                                        <th>
                                          <div className="d-flex">
                                            <a
                                              type="button"
                                              className=" btn-pro-max mb-2"
                                              data-bs-toggle="modal"
                                              data-bs-target="#editModalForm"
                                              onClick={(e) =>
                                                handleEditPostForm(
                                                  e,
                                                  selectedItem
                                                )
                                              }
                                            >
                                              <i class="fa-solid fa-pen-to-square"></i>
                                            </a>
                                            <span className="ed">Edit</span>
                                          </div>
                                        </th>
                                        <th>
                                          <div className="Reset">
                                             <GrPowerReset/>
                                            <span className="ed">Reset</span>
                                          </div>
                                        </th>
                                        <th>
                                          <div className="Deactivate">
                                             <AiOutlineMinusCircle />
                                            <span className="ed">
                                              Deactivate
                                            </span>
                                          </div>
                                        </th>

                                        <th></th>
                                      </thead>
                                    )

                                    // edit row part ends===========================>
                                  }
                                  <tbody>
                                     {/* dynamic table part start========================> */}
                                     {Usermanagement.map((user) => (
                                      <tr key={user.uuid}>
                                        <th scope="row">
                                          <input
                                            type="checkbox"
                                          //   checked={clicked === user.id}
                                          //   onChange={(e) => {
                                          //     if (clicked === user.id) {
                                          //       setSelectedItem(null);
                                          //       setClicked(null);
                                          //     } else {
                                          //       setClicked(user.id);
                                          //     }
                                          //   }}
                                          //  onClick={() => setSelectedItem(user)}
                                          />
                                        </th>
                              
                                        <td>{user.id}</td> 
                                        <td>{user.email}</td>
                                        <td>{user.role}</td>
                                        <td>
                                        <button
                                        type="submit"
                                        data-bs-dismiss="modal"
                                        className="btn btn-danger float-start"
                                        // onClick={handleDelete(user.id)}
                                        onClick={() => DeleteUser(user.uuid)}
                                        >
                                        Delete
                                      </button>
                                      </td>
                                      
                                      </tr>
                                    ))}

                                    {/* dynamic table part ends========================> */}
                                  </tbody>
                                </table>

                                <div className="pag">
                                  <Col lg={4} md={4}>
                                    <ReactPaginate
                                      previousLabel={"<"}
                                      nextLabel={">"}
                                      pageCount={pageCount}
                                      onPageChange={handlePageClick}
                                      containerClassName={"pagination"}
                                      previousLinkClassName={"pagination_link"}
                                      nextLinkClassName={"pagination_link"}
                                      disabledClassName={
                                        "pagination_link--disabled"
                                      }
                                      activeClassName={
                                        "pagination_link--active"
                                      }
                                    />
                                  </Col>
                                </div>

                                {/*Add Modal start========================================= */}

                                <Modal show={show} onHide={handleClose}>
                                  <Modal.Header className="modal-header-one" closeButton>
                                    <Modal.Title>Add Contact</Modal.Title>
                                  </Modal.Header>
                                  <Modal.Body>
                                    {/*  dropdown functionality start =========================*/}
                                    <div className="dropdown">
                                      <select
                                        className="form-select"
                                        value={forms}
                                        onChange={handleOnChange}
                                      >
                                        <option value="Forms">select</option>
                                        <option value="form one">
                                          Administrators
                                        </option>
                                        <option value="form two">
                                          SurveyCreators
                                        </option>
                                      </select>
                                    </div>
                                    {/*  dropdown functionality ends =========================*/}
                                    {/*  component render start =====================*/}
                                    {handleformonevisible && (
                                      <Handleformone
                                        handleAddPost={handleAddPost}
                                        handleChange={handleChange}
                                        handleClose={handleClose}
                                      />
                                    )}
                                    {/*  component render ends =====================*/}
                                  </Modal.Body>
                                 
                                </Modal>
                                {/*Add Modal ends=========================================*/}

                                {/*Edit Row Modal===================================*/}
                                <div
                                  className="modal fade"
                                  id="editModalForm"
                                  tabIndex="-1"
                                  aria-labelledby="exampleModalLabel"
                                  aria-hidden="true"
                                >
                                  <div className="modal-dialog">
                                    <div className="modal-content">
                                      <div className="modal-header">
                                        <h5
                                          className="modal-title"
                                          id="exampleModalLabel"
                                        >
                                          Edit Row
                                        </h5>
                                        <button
                                          type="button"
                                          className="btn-close"
                                          data-bs-dismiss="modal"
                                          aria-label="Close"
                                        ></button>
                                      </div>

                                      <div className="modal-body">
                                        <form onSubmit={handleFormSave}>
                                          <div className="mb-3">
                                            <label className="form-label">
                                             email
                                            </label>
                                            <input
                                              type="text"
                                              className="form-control"
                                              name="email"
                                              value={editFormData.email}
                                              required
                                              onChange={handleEditFormClick(
                                                "email"
                                              )}
                                            />
                                          </div>

                                          <div className="mb-3">
                                            <label className="form-label">
                                             Role
                                            </label>
                                            <textarea
                                              rows="4"
                                              cols="50"
                                              className="form-control"
                                              name="role"
                                              value={editFormData.role}
                                              required
                                              onChange={handleEditFormClick(
                                                "role"
                                              )}
                                            ></textarea>
                                          </div>

                                          <div className="modal-footer d-block">
                                            <button
                                              type="submit"
                                              data-bs-dismiss="modal"
                                              className="btn btn-success float-end"
                                            >
                                              Save 
                                            </button>

                                         {/*   <button
                                            type="submit"
                                            data-bs-dismiss="modal"
                                            className="btn btn-danger float-start"
                                            // onClick={handleDelete(user.id)}
                                            onClick={() => handleDelete(user.id)}
                                          >
                                            Delete Row
                                         </button> */}

                                          </div>
                                        </form>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                {/*Edit Row Modal===================================> */}
                              </Row>
                            </Container>
                          </Accordion.Body>
                        </Accordion.Item>
                      </Accordion>
                      {/* first table  part ends================================================================> */}
                    </div>
                  </Tab>
                   {/*============   Roles part start =========================*/}
                   <Tab eventKey="senderdetail" title="Roles">
                   <Table striped bordered hover variant="blue" className="roles-table">
                   <thead>
                     <tr>
                     
                       <th>Roles</th>
                       <th>Dashboard</th>
                       <th>Customer Surveys</th>
                       <th>Internal Surveys</th>
                       <th>Individual Surveys</th>
                       <th>Usermanagement</th>
                       <th>Settings</th>
                       <th>Billing</th>
                      
                     </tr>
                   </thead>
                   <tbody>
 
                     <tr>
                      
                       <td>Admin</td>
                        <td><input type="checkbox"  checked/></td>
                        <td><input type="checkbox"/></td>
                        <td><input type="checkbox"/></td>
                        <td><input type="checkbox"/></td>
                        <td><input type="checkbox"/></td>
                        <td><input type="checkbox"/></td>
                        <td><input type="checkbox"/></td>
                     </tr>
 
                     <tr>
                   
                     <td>Manager AllSurveys</td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     </tr>
 
                     <tr>
                   
                     <td>Manager CustomerSurveys</td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     </tr>
 
                     <tr>
                   
                     <td>Manager InternalSurveys</td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     </tr>
 
                     <tr>
                    
                     <td>Individual</td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     <td><input type="checkbox"/></td>
                     </tr>
                   </tbody>
                 </Table>
                   </Tab>
                    {/*============   Roles part start ========*/}

                  <Tab eventKey="senderdetailtwo" title="Deactivated"></Tab>

                </Tabs>

                {/* usermanagement Tabs part ends ================================*/}
              </ListGroup>
            </Col>
            {/* usermanagement HTML part ends ================================*/}
          </Row>
        </Container>
      </ListGroup>
    </>
  );
}

export default Usermanagement;
<!-- advance code ends ============================================-->
 
 
 
 
 <ReadTable
 Usermanagement={currentPosts.slice(
   offset,
   offset + PER_PAGE
 )}

 setSelectedItem={setSelectedItem}
 handleEditPostForm={handleEditPostForm}

/>





import {
    ListGroup,
    Container,
    Row,
    Col,
    Form,
    Button,
    Tabs,
    Tab,
    Modal,
    Table
  } from "react-bootstrap";
  import { toast, ToastContainer } from "react-toastify";
  import { Edit } from "react-feather";
  import Sidebar from "../sidebar/Sidebar";
  import "./Usermanagement.css";
  // development part start===========================================>
  import React, { useEffect, useState } from "react";
  import axios from "axios";
  import nextId from "react-id-generator";
  import ReactHTMLTableToExcel from "react-html-table-to-excel";
  import ReactPaginate from "react-paginate";
  import { Accordion } from "react-bootstrap";
  import { BsArrowDownUp } from "react-icons/bs";
  import { AiOutlineMinusCircle } from "react-icons/ai";
  import { GrPowerReset } from "react-icons/gr";
  import ReadTable from "../usermanagement/ReadTable";
  import Handleformone from "../usermanagement/Handleformone";
  import Header from "../header/Header";
  // development part ends============================================>
  
  
  // currentPosts, setCurrentPosts,searchQuery, setSearchQuery,order, setorder,currentPage, setCurrentPage,posts, setPosts,addPost, setAddPost,editPostId, setEditPostId,editFormData, setEditFormData,selectedItem, setSelectedItem
  const PER_PAGE = 5;
  function Usermanagement({}) {
    
    const [show, setShow] = useState(false);
  
    const handleClose = () => setShow(false);
    const handleShow = () => setShow(true);
    {
      /* usermanagement coding part start ================================*/
    }
    // all addtable states start =================================>
    const [posts, setPosts] = useState([]);
    const [addPost, setAddPost] = useState({
      title: "",
      body: "",
    });
  
    const [editPostId, setEditPostId] = useState(null);
    const [editFormData, setEditFormData] = useState({
      title: "",
      body: "",
    });
    const [selectedItem, setSelectedItem] = useState(null);
    const [currentPage, setCurrentPage] = useState(0);
    const [order, setorder] = useState("ASC");
    const [searchQuery, setSearchQuery] = useState("");
    const [currentPosts, setCurrentPosts] = useState([]);
  
    // all addtable states ends====================================>
  
    // Global form functionality start=================================>
    const [forms, setForms] = useState("form one");
    const [handleformonevisible, setHandleFormOneVisible] = useState(false);
  
    // Global Form functionality ends==================================>
  
    // sorting part start================================>
    const sorting = (col) => {
      if (order === "ASC") {
        const sorted = [...posts].sort((a, b) =>
          a[col].toLowerCase() > b[col].toLowerCase() ? 1 : -1
        );
        setPosts(sorted);
        setorder("DSC");
      }
      if (order === "DSC") {
        const sorted = [...posts].sort((a, b) =>
          a[col].toLowerCase() < b[col].toLowerCase() ? 1 : -1
        );
        setPosts(sorted);
        setorder("ASC");
      }
    };
    // sorting part ends=========================================>
  
    //Add Data To Table start==================================>
    const handleAddPost = (e) => {
      e.preventDefault();
  
      const newPost = {
        id: nextId(),
        title: addPost.title,
        body: addPost.body,
      };
      const newPosts = [...posts, newPost];
      setPosts(newPosts);
      console.log(newPosts);
      toast.success("User Added Successfully");
    };
    //Add Data To Table ends==================================>
  
    //Get Form Values start=============================>
    const handleChange = (input) => (e) => {
      e.preventDefault();
      console.log(addPost);
      setAddPost({ ...addPost, [input]: e.target.value });
    };
    //Get Form Values ends=============================>
  
    //Edit data into table starts====================================>
    const handleEditFormClick = (input) => (e) => {
      e.preventDefault();
      console.log(editFormData);
      setEditFormData({ ...editFormData, [input]: e.target.value });
    };
    //Edit data into table ends====================================>
  
    //onclick Edit data into table start====================================>
    const handleEditPostForm = (e, post) => {
      e.preventDefault();
      setEditPostId(post.id);
      console.log(post.id);
  
      const formValues = {
        title: post.title,
        body: post.body,
      };
      setEditFormData(formValues);
    };
  
    //onclick Edit Form Data ends=====================================================>
  
    //Save Edit Form Data start==========================================>
    const handleFormSave = (e) => {
      e.preventDefault();
      const savePost = {
        id: editPostId,
        title: editFormData.title,
        body: editFormData.body,
      };
      const newPosts = [...posts];
      const formIndex = posts.findIndex((post) => post.id === editPostId);
      newPosts[formIndex] = savePost;
      setPosts(newPosts);
      setEditPostId(null);
      // setSelectedItem(null);
      console.log(editPostId);
    };
    //Save Edit Form Data ends==========================================>
  
    //pop-up  Delete Data start===================================================>
    const handleDelete = (e) => {
      e.preventDefault();
      const newPosts = [...posts];
      const formIndex = posts.findIndex((post) => post.id === editPostId);
      newPosts.splice(formIndex, 1);
      setPosts(newPosts);
      setSelectedItem(null);
      console.log(newPosts);
    };
    // pop -up Delete Data ends===================================================>
  
    //Get Data From JSON Placeholder===========================>
    const fetchUrl = "https://jsonplaceholder.typicode.com/posts";
    useEffect(() => {
      async function fetchData() {
        const data = await axios.get(fetchUrl);
        setPosts(data.data);
        console.log(data.data);
        return data;
      }
      fetchData();
    }, [fetchUrl]);
    //Get Data From JSON Placeholder===========================>
  
    // searching part using useEffect=============================>
    useEffect(() => {
      setCurrentPage(0);
      if (!searchQuery) {
        setCurrentPosts(posts);
        return;
      }
      const tempPosts = posts.filter(
        (row) => row.title.toLowerCase().indexOf(searchQuery) > -1
      );
      setCurrentPosts(tempPosts);
    }, [searchQuery, posts]);
    // searching part using useEffect=============================>
  
    // selecting functionality using useeffect start====================>
    useEffect(() => {
      forms === "form one"
        ? setHandleFormOneVisible(true)
        : setHandleFormOneVisible(false);
      // team === "team two" ? setTeamTwoVisible(true) : setTeamTwoVisible(false);
    }, [forms]);
    // selecting functionality using useeffect ends====================>
  
    //  Pagination part start=====================================>
    const handlePageClick = ({ selected: selectedPage }) => {
      console.log("selectedPage", selectedPage);
      setCurrentPage(selectedPage);
    };
    const offset = currentPage * PER_PAGE;
  
    const pageCount = Math.ceil(currentPosts.length / PER_PAGE);
    console.log("hello i am current posts", currentPosts);
    //  Pagination part ends=====================================>
  
    // Global form handling start============================>
    const handleOnChange = (e) => {
      setForms(e.target.value);
    };
    // Global from handling ends================================>
  
    {
      /* usermanagement coding part ends ================================*/
    }
  
    return (
      <>
      <ToastContainer/>
      <Header/>
        <ListGroup bsPrefix className="myprofile">
          <Container fluid>
            <Row>
              <Col className="leftside-content width-fix">
                <Sidebar />
              </Col>
              {/* usermanagement HTML part start ================================*/}
              <Col>
                <ListGroup bsPrefix="rightside-content">
                  {/* search form starts ========================================>*/}
                  <div className="d-flex-user">
                    <Row>
                      <Col md={6} lg={6} className="userhead-right">
                        <div className="usermanagement">
                          <h4>User Management</h4>
                        </div>
                      </Col>
                      
                      <Col md={6} lg={6} className="search-right">
                     <div className="search d-flex">
                      <div className="search">
                          <form className="row g-3 ms-auto">
                            <div className="col-auto">
                              <input
                                type="text"
                                className="form-control ms-auto"
                                placeholder="search data"
                                value={searchQuery}
                                onChange={(e) => setSearchQuery(e.target.value)}
                              />
                            </div>
                          </form>
                        </div>
                        {/*  Add button pop-up start =========================================>*/}
                        <div className="btn-one">
                        <Button variant="warning" onClick={handleShow} >
                          Add +
                        </Button>
                        </div>
                        </div>
                        {/*  Add button pop-up ends =========================================>*/}
                     
                        
                      </Col>
                    </Row>
                  </div>
  
                  {/* search form ends ========================================>*/}
  
                  {/* usermanagement Tabs part start ================================*/}
  
                  <Tabs
                    defaultActiveKey="mydetails"
                    id="uncontrolled-tab-example"
                    className="myprofiletab"
                  >
                    <Tab eventKey="mydetails" title="Users">
                      <div className="common-tab">
                        {/* first table start==================================================> */}
                        <Accordion>
                          <Accordion.Item eventKey="0">
                            <Accordion.Header>Administrators</Accordion.Header>
                            <Accordion.Body>
                              <Container>
                                <Row>
                                  <div className="Dhasu">
                                    <ReactHTMLTableToExcel
                                      id="test-table-xls-button"
                                      className="download-table-xls-button"
                                      table="table-to-xls"
                                      filename="tablexls"
                                      sheet="tablexls"
                                      buttonText="Export"
                                    />
                                  </div>
  
                                  <table
                                    className="table table-bordered border-primary table-responsive"
                                    id="table-to-xls"
                                  >
                                    {
                                      !selectedItem ? (
                                        <thead>
                                          <tr>
                                            <th scope="col">
                                              <input
                                                type="checkbox"
                                                // onChange={(e) => {
                                                //   setSelectedAll((prev) => !prev);
                                                // }}
                                                // checked={selectAll}
                                              />
                                            </th>
  
                                            <th scope="col">ID</th>
                                            <th
                                              className="arrow-one"
                                              scope="col"
                                              onClick={() => sorting("title")}
                                            >
                                              Title
                                              <BsArrowDownUp />
                                            </th>
                                            <th
                                              className="arrow-one"
                                              scope="col"
                                              onClick={() => sorting("body")}
                                            >
                                              Body
                                              <BsArrowDownUp />
                                            </th>
                                          </tr>
                                        </thead>
                                      ) : (
                                        // edit row part start=========================>
                                        <thead>
                                          <th></th>
                                          <th>
                                            <div className="d-flex">
                                              <a
                                                type="button"
                                                className=" btn-pro-max mb-2"
                                                data-bs-toggle="modal"
                                                data-bs-target="#editModalForm"
                                                onClick={(e) =>
                                                  handleEditPostForm(
                                                    e,
                                                    selectedItem
                                                  )
                                                }
                                              >
                                                <i class="fa-solid fa-pen-to-square"></i>
                                              </a>
                                              <span className="ed">Edit</span>
                                            </div>
                                          </th>
                                          <th>
                                            <div className="Reset">
                                               <GrPowerReset/> 
                                              <span className="ed">Reset</span>
                                            </div>
                                          </th>
                                          <th>
                                            <div className="Deactivate">
                                               <AiOutlineMinusCircle /> 
                                              <span className="ed">
                                                Deactivate
                                              </span>
                                            </div>
                                          </th>
  
                                          <th></th>
                                        </thead>
                                      )
  
                                      // edit row part ends===========================>
                                    }
                                    <tbody>
                                      {/* dynamic table part start========================> */}
                                      <ReadTable
                                        posts={currentPosts.slice(
                                          offset,
                                          offset + PER_PAGE
                                        )}
                                        setSelectedItem={setSelectedItem}
                                        handleEditPostForm={handleEditPostForm}
                                      />
  
                                      {/* dynamic table part ends========================> */}
                                    </tbody>
                                  </table>
  
                                  <div className="pag">
                                    <Col lg={4} md={4}>
                                      <ReactPaginate
                                        previousLabel={"<"}
                                        nextLabel={">"}
                                        pageCount={pageCount}
                                        onPageChange={handlePageClick}
                                        containerClassName={"pagination"}
                                        previousLinkClassName={"pagination_link"}
                                        nextLinkClassName={"pagination_link"}
                                        disabledClassName={
                                          "pagination_link--disabled"
                                        }
                                        activeClassName={
                                          "pagination_link--active"
                                        }
                                      />
                                    </Col>
                                  </div>
  
                                  {/*Add Modal start========================================= */}
  
                                  <Modal show={show} onHide={handleClose}>
                                    <Modal.Header className="modal-header-one" closeButton>
                                      <Modal.Title>Add Contact</Modal.Title>
                                    </Modal.Header>
                                    <Modal.Body>
                                      {/*  dropdown functionality start =========================*/}
                                      <div className="dropdown">
                                        <select
                                          className="form-select"
                                          value={forms}
                                          onChange={handleOnChange}
                                        >
                                          <option value="Forms">select</option>
                                          <option value="form one">
                                            Administrators
                                          </option>
                                          <option value="form two">
                                            SurveyCreators
                                          </option>
                                        </select>
                                      </div>
                                      {/*  dropdown functionality ends =========================*/}
                                      {/*  component render start =====================*/}
                                      {handleformonevisible && (
                                        <Handleformone
                                          handleAddPost={handleAddPost}
                                          handleChange={handleChange}
                                          handleClose={handleClose}
                                        />
                                      )}
                                      {/*  component render ends =====================*/}
                                    </Modal.Body>
                                   
                                  </Modal>
                                  {/*Add Modal ends=========================================*/}
  
                                  {/*Edit Row Modal===================================*/}
                                  <div
                                    className="modal fade"
                                    id="editModalForm"
                                    tabIndex="-1"
                                    aria-labelledby="exampleModalLabel"
                                    aria-hidden="true"
                                  >
                                    <div className="modal-dialog">
                                      <div className="modal-content">
                                        <div className="modal-header">
                                          <h5
                                            className="modal-title"
                                            id="exampleModalLabel"
                                          >
                                            Edit Row
                                          </h5>
                                          <button
                                            type="button"
                                            className="btn-close"
                                            data-bs-dismiss="modal"
                                            aria-label="Close"
                                          ></button>
                                        </div>
  
                                        <div className="modal-body">
                                          <form onSubmit={handleFormSave}>
                                            <div className="mb-3">
                                              <label className="form-label">
                                                Title
                                              </label>
                                              <input
                                                type="text"
                                                className="form-control"
                                                name="title"
                                                value={editFormData.title}
                                                required
                                                onChange={handleEditFormClick(
                                                  "title"
                                                )}
                                              />
                                            </div>
  
                                            <div className="mb-3">
                                              <label className="form-label">
                                                Body
                                              </label>
                                              <textarea
                                                rows="4"
                                                cols="50"
                                                className="form-control"
                                                name="body"
                                                value={editFormData.body}
                                                required
                                                onChange={handleEditFormClick(
                                                  "body"
                                                )}
                                              ></textarea>
                                            </div>
  
                                            <div className="modal-footer d-block">
                                              <button
                                                type="submit"
                                                data-bs-dismiss="modal"
                                                className="btn btn-success float-end"
                                              >
                                                Save Row
                                              </button>
  
                                              <button
                                                type="submit"
                                                data-bs-dismiss="modal"
                                                className="btn btn-danger float-start"
                                                onClick={handleDelete}
                                              >
                                                Delete Row
                                              </button>
                                            </div>
                                          </form>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                  {/*Edit Row Modal===================================> */}
                                </Row>
                              </Container>
                            </Accordion.Body>
                          </Accordion.Item>
                        </Accordion>
                        {/* first table  part ends================================================================> */}
                      </div>
                    </Tab>
                    {/*============   Roles part start =========================*/}
                    <Tab eventKey="senderdetail" title="Roles">
                    <Table striped bordered hover variant="blue" className="roles-table">
                    <thead>
                      <tr>
                      
                        <th>Roles</th>
                        <th>Dashboard</th>
                        <th>Customer Surveys</th>
                        <th>Internal Surveys</th>
                        <th>Individual Surveys</th>
                        <th>Usermanagement</th>
                        <th>Settings</th>
                        <th>Billing</th>
                       
                      </tr>
                    </thead>
                    <tbody>
  
                      <tr>
                       
                        <td>Admin</td>
                         <td><input type="checkbox"/></td>
                         <td><input type="checkbox"/></td>
                         <td><input type="checkbox"/></td>
                         <td><input type="checkbox"/></td>
                         <td><input type="checkbox"/></td>
                         <td><input type="checkbox"/></td>
                         <td><input type="checkbox"/></td>
                      </tr>
  
                      <tr>
                    
                      <td>Manager AllSurveys</td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      </tr>
  
                      <tr>
                    
                      <td>Manager CustomerSurveys</td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      </tr>
  
                      <tr>
                    
                      <td>Manager InternalSurveys</td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      </tr>
  
                      <tr>
                     
                      <td>Individual</td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      <td><input type="checkbox"/></td>
                      </tr>
                    </tbody>
                  </Table>
                    </Tab>
                     {/*============   Roles part start ========*/}
  
                      {/*============   Deactiavted part start ========*/}
                    <Tab eventKey="senderdetailtwo" title="Deactivated">
                    
                    </Tab>
                       {/*============   Deactiavted part ends ========*/}
                  </Tabs>
  
                  {/* usermanagement Tabs part ends ================================*/}
                </ListGroup>
              </Col>
              {/* usermanagement HTML part ends ================================*/}
            </Row>
          </Container>
        </ListGroup>
      </>
    );
  }
  
  export default Usermanagement;






  {Usermanagement.map((user) => (
    <tr key={user.uuid}>
      <th scope="row">
        <input
          type="checkbox"
          checked={clicked === user.id}
          onChange={(e) => {
            if (clicked === user.id) {
              setSelectedItem(null);
              setClicked(null);
            } else {
              setClicked(user.id);
            }
          }}
         onClick={() => setSelectedItem(user)}
        />
      </th>

      <td>{user.id}</td> 
      <td>{user.email}</td>
      <td>{user.role}</td>
   <td>
      <button
      type="submit"
      data-bs-dismiss="modal"
      className="btn btn-danger float-start"
      onClick={() => DeleteUser(user.uuid)}
      >
      Delete
      </button>
   </td> 
   </tr>
  ))}












  import React, { useState } from "react";

const ReadTable = ({
  posts,
  setSelectedItem,
 }) => {
const [clicked, setClicked] = useState(null);

 console.log();
  return (
    <>
      {posts.map((post) => (
        <tr key={post.id}>
          <th scope="row">
            <input
              type="checkbox"
              checked={clicked === post.id}
              onChange={(e) => {
                if (clicked === post.id) {
                  setSelectedItem(null);
                  setClicked(null);
                } else {
                  setClicked(post.id);
                }
              }}
             onClick={() => setSelectedItem(post)}
            />
          </th>

          <td>{post.id}</td>
          <td>{post.title}</td>
          <td>{post.body}</td>
        </tr>
      ))}
    </>
  );
};

export default ReadTable;

  